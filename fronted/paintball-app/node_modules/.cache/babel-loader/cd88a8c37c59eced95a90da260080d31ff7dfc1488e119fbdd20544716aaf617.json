{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sagil\\\\OneDrive\\\\\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\\\\paintball-application\\\\paintball-application\\\\fronted\\\\paintball-app\\\\src\\\\components\\\\calendar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { useAuth } from \"../context/auth.context\";\nimport { getUser } from \"../services/userApiServices\";\nimport ProtectedRoute from \"../components/protectedRoute\";\nimport EditActivityCard from \"../components/editActivityCard\";\nimport DeleteActivityCard from \"./common/deleteActivityCard\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Calendar = () => {\n  _s();\n  const {\n    logIn,\n    user\n  } = useAuth();\n  // console.log(user._id);\n  //console.dir(localStorage.token);\n  const [currentWeek, setCurrentWeek] = useState(new Date());\n  const [tasks, setTasks] = useState([]); // should get from server\n  const daysOfWeek = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n  const fetchTasks = async () => {\n    try {\n      const response = await fetch(\"http://localhost:3003/api/tasks\", user ? {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-auth-token\": localStorage.token\n        }\n      } : null);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch tasks\");\n      }\n      const data = await response.json();\n      user ? setTasks(data.tasks) : setTasks(data); // when there is user (token) data gives me also user and also tasks in an object\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n  useEffect(() => {\n    fetchTasks();\n  }, [currentWeek]);\n  const getDaysInWeek = week => {\n    const startOfWeek = new Date(week);\n    startOfWeek.setDate(week.getDate() - week.getDay());\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startOfWeek);\n      day.setDate(startOfWeek.getDate() + i);\n      days.push(day);\n    }\n    return days;\n  };\n\n  //console.log(tasks.filter((task)=>task.phoneNumber==user._id))\n  //console.log(user._id);\n  const renderCalendar = () => {\n    const weekDays = getDaysInWeek(currentWeek);\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-bordered\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: weekDays.map((day, index) => /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-group\",\n            children: tasks.filter(\n              /* Filter tasks for the current day and hour */).map(task => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item\",\n              children: [task.activityName, /*#__PURE__*/_jsxDEV(Link, {\n                to: `/cards/edit-activity-cards/${task.phoneNumber}?cardId=${task._id}`,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-pencil-fill\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/cards/delete-activity-cards/${task.phoneNumber}?cardId=${task._id}`,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 23\n              }, this)]\n            }, task._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  };\n  // console.log(tasks, tasks[0]);\n  // console.log(new Date(tasks[0].activityDate).getHours());\n  // console.log((tasks[0].time));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Calendar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), renderCalendar()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(Calendar, \"wHM3TN3VISpuuusSu4w345bVJaw=\", false, function () {\n  return [useAuth];\n});\n_c = Calendar;\nexport default Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","getUser","ProtectedRoute","EditActivityCard","DeleteActivityCard","Link","Calendar","logIn","user","currentWeek","setCurrentWeek","Date","tasks","setTasks","daysOfWeek","fetchTasks","response","fetch","method","headers","localStorage","token","ok","Error","data","json","error","console","message","getDaysInWeek","week","startOfWeek","setDate","getDate","getDay","days","i","day","push","renderCalendar","weekDays","map","index","filter","task","activityName","phoneNumber","_id"],"sources":["C:/Users/sagil/OneDrive/מסמכים/paintball-application/paintball-application/fronted/paintball-app/src/components/calendar.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { useAuth } from \"../context/auth.context\";\r\nimport { getUser } from \"../services/userApiServices\";\r\nimport ProtectedRoute from \"../components/protectedRoute\";\r\nimport EditActivityCard from \"../components/editActivityCard\";\r\nimport DeleteActivityCard from \"./common/deleteActivityCard\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Calendar = () => {\r\n  const { logIn, user } = useAuth();\r\n  // console.log(user._id);\r\n  //console.dir(localStorage.token);\r\n  const [currentWeek, setCurrentWeek] = useState(new Date());\r\n  const [tasks, setTasks] = useState([]); // should get from server\r\n  const daysOfWeek = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n  const fetchTasks = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        \"http://localhost:3003/api/tasks\",\r\n        user\r\n          ? {\r\n              method: \"GET\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"x-auth-token\": localStorage.token,\r\n              },\r\n            }\r\n          : null\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch tasks\");\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      user ? setTasks(data.tasks) : setTasks(data); // when there is user (token) data gives me also user and also tasks in an object\r\n    } catch (error) {\r\n      console.error(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTasks();\r\n  }, [currentWeek]);\r\n\r\n  const getDaysInWeek = (week) => {\r\n    const startOfWeek = new Date(week);\r\n    startOfWeek.setDate(week.getDate() - week.getDay());\r\n    const days = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      const day = new Date(startOfWeek);\r\n      day.setDate(startOfWeek.getDate() + i);\r\n      days.push(day);\r\n    }\r\n    return days;\r\n  };\r\n\r\n  //console.log(tasks.filter((task)=>task.phoneNumber==user._id))\r\n  //console.log(user._id);\r\n  const renderCalendar = () => {\r\n    const weekDays = getDaysInWeek(currentWeek);\r\n\r\n    return (\r\n      <table className=\"table table-bordered\">\r\n        {/* Table header */}\r\n        <thead>\r\n          {/* Header rows */}\r\n          {/* Buttons for navigating previous and next weeks */}\r\n        </thead>\r\n        {/* Table body */}\r\n        <tbody>\r\n          {/* Rows for each hour */}\r\n          {/* Cells for each day */}\r\n          {weekDays.map((day, index) => (\r\n            <td key={index}>\r\n              <ul className=\"list-group\">\r\n                {/* Render tasks for each hour and day */}\r\n                {tasks\r\n                  .filter(/* Filter tasks for the current day and hour */)\r\n                  .map((task) => (\r\n                    <li key={task._id} className=\"list-group-item\">\r\n                      {task.activityName}\r\n                      {/* Render link for editing */}\r\n                      <Link\r\n                        to={`/cards/edit-activity-cards/${task.phoneNumber}?cardId=${task._id}`}\r\n                      >\r\n                        <i className=\"bi bi-pencil-fill\"></i>\r\n                      </Link>\r\n                      {/* Render link for deleting */}\r\n                      <Link\r\n                        to={`/cards/delete-activity-cards/${task.phoneNumber}?cardId=${task._id}`}\r\n                      >\r\n                        <i className=\"bi bi-trash\"></i>\r\n                      </Link>\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </td>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  };\r\n  // console.log(tasks, tasks[0]);\r\n  // console.log(new Date(tasks[0].activityDate).getHours());\r\n  // console.log((tasks[0].time));\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2>Calendar</h2>\r\n      {renderCalendar()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calendar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}